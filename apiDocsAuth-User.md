# Spotify Clone

## Database Schema Design

![spotify-database-schema]

## API Documentation

## User Authentication/Authorization

### All endpoints that require authentication

All endpoints that require a current user to be logged in.

- Request: endpoints that require authentication
- Error Response: Require authentication

  - Status Code: 401
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
  {
  	"message": "Authentication required"
  }
  ```

### All endpoints that require proper authorization

All endpoints that require authentication and the current user does not have the
correct role(s) or permission(s).

- Request: endpoints that require proper authorization
- Error Response: Require proper authorization

  - Status Code: 403
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"message": "Forbidden"
    }
    ```

### Get the Current User

Returns the information about the current user that is logged in.

- Require Authentication: false
- Request

  - Method: GET
  - URL: /api/users/current
  - Body: none

- Successful Response when there is a logged in user

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"user": {
    		"id": 1,
    		"name": "Devon",
    		"email": "theGoatedDevon@gmail.com",
        "isArtist": false,
        "imageUrl": null
    	}
    }
    ```

* Successful Response when there is no logged in user

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"user": null
    }
    ```

### Log In a User

Logs in a current user with valid credentials and returns the current user's
information.

- Require Authentication: false
- Request

  - Method: POST
  - URL: /api/auth/login
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"email": "theGoatedDevon@gmail.com",
    	"password": "secret password"
    }
    ```

* Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    		"id": 1,
    		"name": "Devon",
    		"email": "theGoatedDevon@gmail.com",
        "imageUrl": null,
        "isArtist": false
    }
    ```

* Error Response: Invalid credentials

  - Status Code: 401
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"message": "Invalid credentials"
    }
    ```

* Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"message": "Bad Request", // (or "Validation error" if generated by wtforms),
    	"errors": {
    		"email": ["This field is required"],
    		"password": ["This field is required"]
    	}
    }
    ```

### Sign Up a User

Creates a new user, logs them in as the current user, and returns the current
user's information.

- Require Authentication: false
- Request

  - Method: POST
  - URL: /api/users
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"name": "Devon",
    	"email": "theGoatedDevon@gmail.com",
    	"password": "secret password",
      "imageUrl": "image url"
    }
    ```

* Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"user": {
    		"id": 1,
    		"name": "Devon",
    		"email": "theGoatedDevon@gmail.com",
        "imageUrl": "image url"
    	}
    }
    ```

* Error response: User already exists with the specified email

  - Status Code: 500
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"message": "User already exists",
    	"errors": {
    		"email": "User with that email already exists"
    	}
    }
    ```

* Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:
    ```json
    {
    	"message": "Bad Request", // (or "Validation error" if generated by Sequelize),
    	"errors": {
    		"email": "Invalid email",
    		"name": "Name is required"
    	}
    }
    ```

## Albums

### Get an Album by albumId

Returns information on an album specified by its id

- Require Authentication: false
- Request

  - Method: GET
  - URL: /api/albums/:albumId
  - Headers:
    - Content-Type: application/json
  - Body: None

* Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"name": "First Album",
    	"releaseDate": "01/01/2024",
    	"albumType": "Single",
    	"imageUrl": "image url",
    	"tracks": {
    		"song1": {
    			"name": "First Track",
    			"duration": 180,
    			"file": "/directory/to/file",
    			"artistId": 1,
    			"albumId": 1
    		}
    	},
    	"genre": "Country",
    	"artistId": 1
    }
    ```

* Error response: Couldn't find an Album with the specified id

- Status Code: 404
- Headers:
- Content-Type: application/json
- Body:

  ```json
    "message": "Album couldn't be found"
  ```

### Get all Albums

Returns an object containing all albums across the website.

- Require Authentication: false
- Request

  - Method: GET
  - URL: /api/albums
  - Headers:
    - Content-Type: application/json
  - Body: None

* Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"albums": [
    		{
          "albumId": 1,
    			"name": "First Album",
    			"releaseDate": "01/01/2024",
    			"genre": "Country",
    			"albumType": "Single",
    			"imageUrl": "image url",
    			"artistId": 1
    		}
      ]
    }
    ```

### Get albums by artistId

Returns an object containing all albums created by artistId

- Require Authentication: false
- Request

  - Method: GET
  - URL: /api/albums/artists/:artistId
  - Headers:
    - Content-Type: application/json
  - Body: None

* Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"albums": [
    		{
          "albumId": 1,
          "name": "First Album",
          "releaseDate": "01/01/2024",
          "genre": "Country",
          "albumType": "Single",
          "imageUrl": "image url",
          "artistId": 1,
          "tracks": [
            {
              "name": "Track One",
              "duration": 180,
              "file": "path/to/file",
              "trackId": 1,
              "artistId": 1,
              "albumId": 1
            },
            {
              "name": "Track Two",
              "duration": 180,
              "file": "path/to/file",
              "trackId": 2,
              "artistId": 1,
              "albumId": 1
            }
          ]
    		}
      ]
    }
    ```

* Error response: Couldn't find an Artist with the specified id

- Status Code: 404
- Headers:
- Content-Type: application/json
- Body:

  ```json
    "message": "Artist couldn't be found"
  ```

### Get albums by current user (Artist)

Returns an object containing all albums created by artistId

- Require Authentication: true
- Request

  - Method: GET
  - URL: /api/albums/current
  - Headers:
    - Content-Type: application/json
  - Body: None

* Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"albums": {
    		"1": {
    			"name": "First Album",
    			"releaseDate": "01/01/2024",
    			"genre": "Country",
    			"albumType": "Single",
    			"albumId": 1,
    			"imageUrl": "image url",
    			"artistId": 1,
          "tracks": [
            {
              "name": "Track One",
              "duration": 180,
              "file": "path/to/file",
              "trackId": 1,
              "artistId": 1,
              "albumId": 1
            },
            {
              "name": "Track Two",
              "duration": 180,
              "file": "path/to/file",
              "trackId": 2,
              "artistId": 1,
              "albumId": 1
            }
          ]
    		}
      }
    }
    ```

### Create an album

Returns data on newly created album

- Require Authentication: true
- Request

  - Method: POST
  - URL: /api/albums
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
  {
  	"name": "Second Album",
  	"releaseDate": "01/02/2024",
  	"albumType": "Album",
  	"genre": "Rock",
  	"imageUrl": "image url",
  	"artistId": 1
  }
  ```

* Successful Response

  - Status Code: 201
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"name": "Second Album",
    	"releaseDate": "01/02/2024",
    	"genre": "Rock",
    	"albumType": "Album",
    	"imageUrl": "image url",
    	"tracks": null,
    	"albumId": 2,
    	"artistId": 1
    }
    ```

* Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:
    ```json
    {
    	"message": "Bad Request", // (or "Validation error" if generated by Sequelize),
    	"errors": {
    		"name": "Name is required",
    		"releaseDate": "Release Date is Required",
    		"genre": "Genre is required",
    		"albumType": "Album Type is required",
    		"imageUrl": "Image Id is required"
    	}
    }
    ```

### Edit an album

Returns data on an edited album

- Require Authentication: true
- Require Authorization: true
- Request

  - Method: PUT
  - URL: /api/albums/:albumId
  - Headers:
    - Content-Type: application/json
  - Body:

  ```json
  {
  	"name": "Edited Second Album",
  	"releaseDate": "01/02/2024",
  	"albumType": "Album",
  	"genre": "Rock",
    "imageUrl": "image url",
  	"artistId": 1
  }
  ```

* Successful Response

  - Status Code: 201
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"name": "Edited Second Album",
    	"releaseDate": "01/02/2024",
    	"genre": "Rock",
    	"albumType": "Album",
    	"imageUrl": "image url",
    	"tracks": null,
    	"albumId": 2,
    	"artistId": 1
    }
    ```

* Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:
    ```json
    {
    	"message": "Bad Request", // (or "Validation error" if generated by Sequelize),
    	"errors": {
    		"name": "Name is required",
    		"releaseDate": "Release Date is Required",
    		"genre": "Genre is required",
    		"albumType": "Album Type is required",
    		"imageUrl": "Image Id is required"
    	}
    }
    ```

* Error response: Couldn't find an Album with the specified id

- Status Code: 404
- Headers:
- Content-Type: application/json
- Body:

  ```json
    "message": "Album couldn't be found"
  ```

### Delete an album by albumId

Deletes an album specified by its id

- Require Authentication: true
- Require Authorization: true
- Request

  - Method: DELETE
  - URL: /api/albums/:albumId
  - Headers:
    - Content-Type: application/json
  - Body: None

* Successful Response

  - Status Code: 200
  - Headers:
    - Content-Type: application/json
  - Body:

    ```json
    {
    	"message": "Successfully deleted"
    }
    ```

* Error response: Couldn't find an Album with the specified id

- Status Code: 404
- Headers:
- Content-Type: application/json
- Body:

  ```json
  {
  	"message": "Album couldn't be found"
  }
  ```

## Tracks

### Get all tracks

Returns an object containing all tracks

- Require Authentication: false
- Require Authorization: false

* Request:

  - Method: GET
  - URL: /api/tracks
  - Headers:
    - Content-Type: application/json
  - Body: None

* Successful Response:

```json
{
	"tracks": [
		{
			"name": "Track One",
			"duration": 180,
			"file": "path/to/file",
			"trackId": 1,
			"artistId": 1,
			"albumId": 1
		},
		{
			"name": "Track Two",
			"duration": 180,
			"file": "path/to/file",
			"trackId": 2,
			"artistId": 1,
			"albumId": 1
		}
	]
}
```

### Get all tracks by current user (artist)

Returns an object containing all tracks

- Require Authentication: true
- Require Authorization: true

* Request:
  - Method: GET
  - URL: /api/tracks/current
  - Headers:
    - Content-Type: application/json
  - Body: None
* Successful Response:

```json
[
	{
		"trackId": 1,
		"name": "track one",
		"duration": 180,
		"file": "path/to/file",
		"artistId": 1,
		"albumId": 1,
	},
	{
		"trackId": 2,
		"name": "track two",
		"duration": 180,
		"file": "path/to/file",
		"artistId": 1,
		"albumId": 1,
	}
]
```

- Error Response:

```json
{
	"message": "Artist couldn't be found"
}
```

### Get a track by trackId

Returns an object containing all tracks

- Require Authentication: false
- Require Authorization: false

* Request:
  - Method: GET
  - URL: /api/tracks/:trackId
  - Headers:
    - Content-Type: application/json
  - Body: None
* Successful Response:

```json
{
	"trackId": 1,
	"name": "track one",
	"duration": 180,
	"file": "path/to/file",
	"artistId": 1,
	"albumId": 1,
}
```

- Error Response:

```json
{ "message": "Track couldn't be found" }
```

### Create a track

Returns an object containing all tracks

- Require Authentication: true
- Require Authorization: false

* Request:
  - Method: POST
  - URL: /api/tracks/new
  - Headers:
    - Content-Type: application/json
  - Body:
  ```json
  {
  	"name": "track three",
  	"duration": 180,
  	"file": "path/to/file",
  	"artistId": 1,
  	"albumId": 1
  }
  ```
* Successful Response:
  ```json
  {
  	"trackId": 3,
  	"name": "track three",
  	"duration": 180,
  	"file": "path/to/file",
  	"artistId": 1,
  	"albumId": 1
  }
  ```
* Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:
    ```json
    {
    	"message": "Bad Request", // (or "Validation error" if generated by Sequelize),
    	"errors": {
    		"name": "Name is required",
    		"file": "File is required",
    		"albumId": "Album Id is required"
    	}
    }
    ```

### Edit a track by trackId

Returns an object containing all tracks

- Require Authentication: true
- Require Authorization: true

* Request:
  - Method: PUT
  - URL: /api/tracks/:trackId
  - Headers:
    - Content-Type: application/json
  - Body:
  ```json
  {
  	"name": "track three edit",
  	"file": "path/to/file"
  }
  ```
* Successful Response:
  ```json
  {
  	"trackId": 3,
  	"name": "track three edit",
  	"duration": 180,
  	"file": "path/to/file",
  	"artistId": 1,
  	"albumId": 1
  }
  ```
* Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:
    ```json
    {
    	"message": "Bad Request", // (or "Validation error" if generated by Sequelize),
    	"errors": {
    		"name": "Name is required",
    		"file": "File is required",
    		"albumId": "Album Id is required"
    	}
    }
    ```

### Delete a track by trackId
Deletes a track

- Require Authentication: true
- Require Authorization: true

* Request:
  - Method: DELETE
  - URL: /api/tracks/:trackId
  - Headers:
    - Content-Type: application/json
  - Body: None
* Successful Response:

```json
{
	"message": "Successfully Deleted"
}
```

- Error Response:
- Status Code: 404
  - Headers:
    - Content-Type: application/json

```json
{
	"message": "Couldn't find track"
}
```
### Playlists
## Get a Playlist by playlistId

Returns a playlist object

- Require Authentication: true
- Require Authorization: false

* Request:
  - Method: GET
  - URL: /api/playlists/:playlistId
  - Headers:
    - Content-Type: application/json
  - Body: None
* Successful Response:

```json
{
  "playlists": [
    {
      "id": 1,
      "name": "Test Playlist",
      "userId": 3,
      "imageUrl": "image url",
      "Private": false,
      "tracks": [
        {
          "trackId": 1,
          "name": "track one",
          "duration": 180,
          "file": "path/to/file",
          "artistId": 1,
          "albumId": 1
        },
        {
          "trackId": 2,
          "name": "track two",
          "duration": 180,
          "file": "path/to/file",
          "artistId": 1,
          "albumId": 1
        }
      ]
    }
  ]
}
```

- Error Response:

```json
{
	"message": "Playlist couldn't be found"
}
```

## Get all Playlists of current user (user)

Returns a playlist object

- Require Authentication: true
- Require Authorization: true

* Request:
  - Method: GET
  - URL: /api/playlists/current
  - Headers:
    - Content-Type: application/json
  - Body: None
* Successful Response:

```json
{
  "playlists": [
    {
      "id": 1,
      "name": "Test Playlist",
      "userId": 3,
    	"imageUrl": "image url",
      "Private": false,
      "tracks": [
        {
          "trackId": 1,
          "name": "track one",
          "duration": 180,
          "file": "path/to/file",
          "artistId": 1,
          "albumId": 1
        },
        {
          "trackId": 2,
          "name": "track two",
          "duration": 180,
          "file": "path/to/file",
          "artistId": 1,
          "albumId": 1,
        }
      ]
    },
    {
      "id": 2,
      "name": "Test Playlist",
      "userId": 3,
    	"imageUrl": "image url",
      "Private": false,
      "tracks": [
        {
          "trackId": 1,
          "name": "track one",
          "duration": 180,
          "file": "path/to/file",
          "artistId": 1,
          "albumId": 1
        },
        {
          "trackId": 2,
          "name": "track two",
          "duration": 180,
          "file": "path/to/file",
          "artistId": 1,
          "albumId": 1
        }
      ]
    }
  ]
}
```

- Error Response:

```json
{
	"message": "User couldn't be found"
}
```

## Create a Playlist

Returns a newly created playlist

- Require Authentication: true
- Require Authorization: false

* Request:
  - Method: POST
  - URL: /api/playlists/new
  - Headers:
    - Content-Type: application/json
  - Body:
  ```json
  {
  	"name": "Test Playlist",
    "imageUrl": "image url",
    "userId": 1,
    "private": false
  }
  ```
* Successful Response:
  ```json
  {
  	"playlistId": 8,
  	"name": "Test Playlist",
    "imageUrl": "image url",
    "userId": 1,
    "private": false,
    "tracks": []
  }
  ```
* Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:
    ```json
    {
    	"message": "Bad Request", // (or "Validation error" if generated by Sequelize),
    	"errors": {
    		"name": "Name is required",
    		"imageUrl": "imageUrl is required",
        "private": "Private status required"
    	}
    }
    ```

## Edit a Playlist by playlistId
Returns the updated playlist

- Require Authentication: true
- Require Authorization: true

* Request:
  - Method: PUT
  - URL: /api/playlists/:playlistId
  - Headers:
    - Content-Type: application/json
  - Body:
  ```json
  {
  	"name": "Test Playlist",
    "imageUrl": "image url",
    "userId": 1,
    "private": false
  }
  ```
* Successful Response:
  ```json
  {
  	"playlistId": 8,
  	"name": "Test Playlist",
    "imageUrl": "image url",
    "userId": 1,
    "private": false,
    "tracks": []
  }
  ```
* Error response: Body validation errors

  - Status Code: 400
  - Headers:
    - Content-Type: application/json
  - Body:
    ```json
    {
    	"message": "Bad Request", // (or "Validation error" if generated by Sequelize),
    	"errors": {
    		"name": "Name is required",
    		"imageUrl": "imageUrl is required",
        "private": "Private status required"
    	}
    }
    ```

## Delete a Playlist by playlistId

Deletes a playlist

- Require Authentication: true
- Require Authorization: true

* Request:
  - Method: DELETE
  - URL: /api/playlists/:playlistId
  - Headers:
    - Content-Type: application/json
  - Body: None
* Successful Response:

```json
{
	"message": "Successfully Deleted"
}
```

- Error Response:
- Status Code: 404
  - Headers:
    - Content-Type: application/json

```json
{
	"message": "Couldn't find Playlist"
}
```
